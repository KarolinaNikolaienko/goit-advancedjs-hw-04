{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet currentPage = 1;\nconst per_page = 15;\n\nexport function searchImages(query) {\n    const config = new URLSearchParams({\n        key: \"3632143-ebeee10190d206f1a5cb99fa1\",\n        q: encodeURIComponent(query),\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: per_page,\n        page: currentPage\n    });\n    currentPage += 1;\n    return axios.get(`https://pixabay.com/api/?${config}`);\n\n    // return fetch(`https://pixabay.com/api/?${config}`)\n    //     .then((response) => {\n    //         if (!response.ok)\n    //             throw new Error(response.status);\n    //         return response.json();\n    //     });\n}\n\nexport function resetPage() {\n    currentPage = 1;\n}\n\nexport function getPerPage() {\n    return per_page;\n}\n","import simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightboxImages = new simpleLightbox('.images-list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function showImages(images) {\n  const imagesList = document.querySelector(\".images-list\");\n  imagesList.classList.remove(\"hidden\");\n  let imagesHTML = \"\";\n\n  // Add found images\n  for (let i = 0; i < images.data.hits.length; i++) {\n      const img = images.data.hits[i];\n      imagesHTML += `<li class=\"images-item\">\n  <a class=\"images-link\" href=\"${img.largeImageURL}\" onclick=\"return false\">\n  <img\n    class=\"image\"\n    src=\"${img.webformatURL}\"\n    alt=\"${img.tags}\"\n  />\n  </a>\n  <div class=\"image-statistics\">\n              <ul class=\"stat-list stat-titles-list\">\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Likes</span\n                  ><span class=\"stat-value\">${img.likes}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Views</span\n                  ><span class=\"stat-value\">${img.views}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Comments</span\n                  ><span class=\"stat-value\">${img.comments}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Downloads</span\n                  ><span class=\"stat-value\">${img.downloads}</span>\n                </li>\n              </ul>\n            </div>\n  </li>`;\n  }\n  imagesList.insertAdjacentHTML(\"beforeend\", imagesHTML);\n  \n  // Refresh lightbox\n  lightboxImages.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getPerPage, resetPage, searchImages } from \"./js/pixabay-api\";\nimport { showImages } from \"./js/render-functions\";\n\nconst formElem = document.querySelector(\"form\");\nconst btnLoadMore = document.querySelector(\".btn-load-mode\");\nconst loader = document.querySelector(\".loader\");\nconst endLine = document.querySelector(\".end-line\");\nlet searchQuery = \"\";\n\nformElem.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const form = event.target;\n\n    // Search query check\n    searchQuery = form.elements.query.value.trim();\n    if (searchQuery !== \"\") {\n        // Clear the gallery\n        const imagesList = document.querySelector(\".images-list\");\n        imagesList.classList.add(\"hidden\");\n        imagesList.innerHTML = \"\";\n\n        // Show loading message\n        loader.classList.remove(\"hidden\");\n\n        // Hide Load mode button and end line message\n        endLine.classList.add(\"hidden\");\n        btnLoadMore.classList.add(\"hidden\");\n\n        // Reset page\n        resetPage();\n\n        // Search image\n        const images = await searchImages(searchQuery);\n        loader.classList.add(\"hidden\");\n        // If there is no images - show a toast\n        if (!images.data.hits.length) {\n            iziToast.error({\n                class: \"error-alert\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                messageColor: \"white\",\n                position: \"topRight\",\n                maxWidth: 432\n            });\n        }\n        // Else - show pictures\n        else {\n            showImages(images);\n            btnLoadMore.classList.remove(\"hidden\");\n        }\n    }\n    else\n        iziToast.error({\n            class: \"error-alert\",\n            message: \"Search query is empty\",\n            messageColor: \"white\",\n            position: \"topRight\",\n            maxWidth: 432\n        });\n});\n\nbtnLoadMore.addEventListener(\"click\", async (event) => {\n    // Search query check\n    if (searchQuery !== \"\") {\n        // Show loading message\n        loader.classList.remove(\"hidden\");\n        // Hide Load mode button and end line message\n        endLine.classList.add(\"hidden\");\n        btnLoadMore.classList.add(\"hidden\");\n\n        const images = await searchImages(searchQuery);\n        loader.classList.add(\"hidden\");\n        // If there is no images - show a toast\n        if (!images.data.hits.length) {\n            iziToast.error({\n                class: \"error-alert\",\n                message: \"Sorry, there are no images any more!\",\n                messageColor: \"white\",\n                position: \"topRight\",\n                maxWidth: 432\n            });\n        }\n        // Else - show pictures\n        else {\n            showImages(images);\n\n            // Show end line message and hide Load more button\n            if (images.data.hits.length < getPerPage()) {\n                btnLoadMore.classList.add(\"hidden\");\n                endLine.classList.remove(\"hidden\");\n            }\n            else\n                btnLoadMore.classList.remove(\"hidden\");\n\n            // Scroll down\n            const h = document.querySelector(\".images-item\").getBoundingClientRect().height;\n            window.scrollBy({\n                top: 2 * h,\n                left: 0,\n                behavior: \"smooth\"\n            });\n        }\n    }\n    else\n        iziToast.error({\n            class: \"error-alert\",\n            message: \"Search query is empty\",\n            messageColor: \"white\",\n            position: \"topRight\",\n            maxWidth: 432\n        });\n});"],"names":["currentPage","per_page","searchImages","query","config","axios","resetPage","getPerPage","lightboxImages","simpleLightbox","showImages","images","imagesList","imagesHTML","i","img","formElem","btnLoadMore","loader","endLine","searchQuery","event","iziToast","h"],"mappings":"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"}
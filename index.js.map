{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet currentPage = 1;\nconst per_page = 15;\n\nexport async function searchImages(query) {\n    const config = new URLSearchParams({\n        key: \"3632143-ebeee10190d206f1a5cb99fa1\",\n        q: encodeURIComponent(query),\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: per_page,\n        page: currentPage\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${config}`);\n    currentPage += 1;\n    return response.data;\n\n\n    // return fetch(`https://pixabay.com/api/?${config}`)\n    //     .then((response) => {\n    //         if (!response.ok)\n    //             throw new Error(response.status);\n    //         return response.json();\n    //     });\n}\n\nexport function resetPage() {\n    currentPage = 1;\n}\n\nexport function getPerPage() {\n    return per_page;\n}\n","import simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function showImages(images) {\n  const imagesList = document.querySelector(\".images-list\");\n  imagesList.classList.remove(\"hidden\");\n  let imagesHTML = \"\";\n\n  // Add found images\n  for (let i = 0; i < images.hits.length; i++) {\n      const img = images.hits[i];\n      imagesHTML += `<li class=\"images-item\">\n  <a class=\"images-link\" href=\"${img.largeImageURL}\" onclick=\"return false\">\n  <img\n    class=\"image\"\n    src=\"${img.webformatURL}\"\n    alt=\"${img.tags}\"\n  />\n  </a>\n  <div class=\"image-statistics\">\n              <ul class=\"stat-list stat-titles-list\">\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Likes</span\n                  ><span class=\"stat-value\">${img.likes}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Views</span\n                  ><span class=\"stat-value\">${img.views}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Comments</span\n                  ><span class=\"stat-value\">${img.comments}</span>\n                </li>\n                <li class=\"stat-titles-item\">\n                  <span class=\"stat-title\">Downloads</span\n                  ><span class=\"stat-value\">${img.downloads}</span>\n                </li>\n              </ul>\n            </div>\n  </li>`;\n  }\n  imagesList.insertAdjacentHTML(\"beforeend\", imagesHTML);\n  \n  // Refresh lightbox\n  const lightboxImages = new simpleLightbox('.images-list a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n  });\n  lightboxImages.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getPerPage, resetPage, searchImages } from \"./js/pixabay-api\";\nimport { showImages } from \"./js/render-functions\";\n\nconst formElem = document.querySelector(\"form\");\nconst btnLoadMore = document.querySelector(\".btn-load-mode\");\nconst loader = document.querySelector(\".loader\");\nconst endLine = document.querySelector(\".end-line\");\nlet searchQuery = \"\";\n\nformElem.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    // Clear the gallery\n    const imagesList = document.querySelector(\".images-list\");\n    imagesList.classList.add(\"hidden\");\n    imagesList.innerHTML = \"\";\n\n    const form = event.target;\n    searchQuery = form.elements.query.value;\n    // Show loading message\n    loader.classList.remove(\"hidden\");\n\n    // Hide Load mode button and end line message\n    endLine.classList.add(\"hidden\");\n    btnLoadMore.classList.add(\"hidden\");\n\n    // Reset page\n    resetPage();\n\n    // Search image\n    searchImages(searchQuery)\n        .then((images) => {\n            loader.classList.add(\"hidden\");\n            // If there is no images - show a toast\n            if (!images.hits.length) {\n                iziToast.error({\n                    class: \"error-alert\",\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    messageColor: \"white\",\n                    position: \"topRight\",\n                    maxWidth: 432\n                });\n            }\n            // Else - show pictures\n            else {\n                showImages(images);\n                btnLoadMore.classList.remove(\"hidden\");\n            }\n        })\n        .catch((error) => console.log(error));\n});\n\nbtnLoadMore.addEventListener(\"click\", (event) => {\n    if (searchQuery) {\n        // Show loading message\n        loader.classList.remove(\"hidden\");\n        // Hide Load mode button and end line message\n        endLine.classList.add(\"hidden\");\n        btnLoadMore.classList.add(\"hidden\");\n\n        searchImages(searchQuery)\n            .then((images) => {\n                loader.classList.add(\"hidden\");\n                // If there is no images - show a toast\n                if (!images.hits.length) {\n                    iziToast.error({\n                        class: \"error-alert\",\n                        message: \"Sorry, there are no images any more!\",\n                        messageColor: \"white\",\n                        position: \"topRight\",\n                        maxWidth: 432\n                    });\n                }\n                // Else - show pictures\n                else {\n                    showImages(images);\n\n                    // Show end line message and hide Load more button\n                    if (images.hits.length < getPerPage()) {\n                        btnLoadMore.classList.add(\"hidden\");\n                        endLine.classList.remove(\"hidden\");\n                    }\n                    else\n                        btnLoadMore.classList.remove(\"hidden\");\n\n                    // Scroll down\n                    const h = document.querySelector(\".images-item\").getBoundingClientRect().height;\n                    window.scrollBy({\n                        top: 2 * h,\n                        left: 0,\n                        behavior: \"smooth\"\n                    });\n                }\n            })\n            .catch((error) => console.log(error));\n    }\n    else\n        iziToast.error({\n                        class: \"error-alert\",\n                        message: \"Search query is empty\",\n                        messageColor: \"white\",\n                        position: \"topRight\",\n                        maxWidth: 432\n                    });\n});"],"names":["currentPage","per_page","searchImages","query","config","response","axios","resetPage","getPerPage","showImages","images","imagesList","imagesHTML","i","img","simpleLightbox","formElem","btnLoadMore","loader","endLine","searchQuery","event","iziToast","error","h"],"mappings":"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"}